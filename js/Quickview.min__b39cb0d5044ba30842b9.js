webpackJsonpCoveo__temporary([14],{14:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=function(){function e(){}return e.addClassToSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",""+e.getClass(n)+o)},e.removeClassFromSVGInContainer=function(t,o){var n=t.querySelector("svg");n.setAttribute("class",e.getClass(n).replace(o,""))},e.addStyleToSVGInContainer=function(e,t){var o=e.querySelector("svg");n.each(t,function(e,t){o.style[t]=e})},e.getClass=function(e){var t=e.getAttribute("class");return t?t+" ":""},e}();t.SVGDom=i},151:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.quickviewLoaded="quickviewLoaded",e.openQuickview="openQuickview",e}();t.QuickviewEvents=n},189:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(6),r=o(7),a=o(61),s=o(2),l=o(402),u=o(31),c=o(18),d=o(403),p=o(12),m=o(151),h=o(1),v=o(20),g=o(23),f=o(3);o(404);var w=o(13),y=o(14),b=o(9),C=o(4),k=o(51),$=function(e){function t(o,n,i,a,c){void 0===c&&(c=g.ModalBox);var d=e.call(this,o,t.ID,i)||this;if(d.element=o,d.options=n,d.bindings=i,d.result=a,d.ModalBox=c,d.options=r.ComponentOptions.initComponentOptions(o,t,n),null==d.options.contentTemplate&&(d.options.contentTemplate=new l.DefaultQuickviewTemplate),/^\s*$/.test(d.element.innerHTML)){var p=s.$$("div",{className:"coveo-icon-for-quickview"},w.SVGIcons.icons.quickview);y.SVGDom.addClassToSVGInContainer(p.el,"coveo-icon-for-quickview-svg");var m=s.$$("div",{className:"coveo-caption-for-icon",tabindex:0},"Quickview".toLocaleString()).el,h=s.$$("div");h.append(p.el),h.append(m),s.$$(d.element).append(h.el)}return d.bindClick(a),d.bindings.resultElement&&d.bind.on(d.bindings.resultElement,u.ResultListEvents.openQuickview,function(){return d.open()}),d}return n(t,e),t.prototype.open=function(){var e=this;if(null==this.modalbox){t.resultCurrentlyBeingRendered=this.result,s.$$(document.activeElement).trigger("blur");var o=this.prepareOpenQuickviewObject();this.createModalBox(o).then(function(){e.bindQuickviewEvents(o),e.animateAndOpen(),e.logUsageAnalyticsEvent(),e.queryStateModel.set(p.QueryStateModel.attributesEnum.quickview,e.getHashId()),t.resultCurrentlyBeingRendered=null})}},t.prototype.close=function(){null!=this.modalbox&&(this.modalbox.close(),this.modalbox=null)},t.prototype.getHashId=function(){return this.result.queryUid+"."+this.result.index+"."+c.StringUtils.hashCode(this.result.uniqueId)},t.prototype.logUsageAnalyticsEvent=function(){this.usageAnalytics.logClickEvent(b.analyticsActionCauseList.documentQuickview,{author:C.Utils.getFieldValue(this.result,"author"),documentURL:this.result.clickUri,documentTitle:this.result.title},this.result,this.element)},t.prototype.bindClick=function(e){var t=this;if(void 0===e.hasHtmlVersion||e.hasHtmlVersion||this.options.alwaysShow){var o=function(){return t.open()};s.$$(this.element).on("click",o),this.bind.on(this.element,"keyup",v.KeyboardUtils.keypressAction(v.KEYBOARD.ENTER,o))}else this.element.style.display="none"},t.prototype.bindQuickviewEvents=function(e){s.$$(this.modalbox.content).on(m.QuickviewEvents.quickviewLoaded,function(){e.loadingAnimation instanceof HTMLElement?s.$$(e.loadingAnimation).remove():e.loadingAnimation instanceof Promise&&e.loadingAnimation.then(function(e){s.$$(e).remove()})})},t.prototype.animateAndOpen=function(){var e=s.$$(this.modalbox.modalBox).find("."+i.Component.computeCssClassName(d.QuickviewDocument));e&&h.Initialization.dispatchNamedMethodCallOrComponentCreation("open",e,null)},t.prototype.createModalBox=function(e){var t=this,o=s.$$("div");return o.addClass("coveo-computed-modal-box-content"),e.content.then(function(e){o.append(e.el);var n=a.DomUtils.getQuickviewHeader(t.result,{showDate:t.options.showDate,title:t.options.title},t.bindings).el;return t.modalbox=t.ModalBox.open(o.el,{title:n,className:"coveo-quick-view",validation:function(){return t.closeQuickview(),!0},body:t.element.ownerDocument.body,sizeMod:"big"}),o})},t.prototype.prepareOpenQuickviewObject=function(){var e=this.options.loadingAnimation;return{loadingAnimation:e,content:this.prepareQuickviewContent(e)}},t.prototype.prepareQuickviewContent=function(e){var t=this;return this.options.contentTemplate.instantiateToElement(this.result).then(function(o){var n=s.$$(o),r=t.searchInterface.options,a={options:r,bindings:t.getBindings(),result:t.result};return h.Initialization.automaticallyCreateComponentsInside(n.el,a).initResult.then(function(){return void 0!=n.find("."+i.Component.computeCssClassName(d.QuickviewDocument))&&t.options.enableLoadingAnimation&&(e instanceof HTMLElement?n.prepend(e):e instanceof Promise&&e.then(function(e){n.prepend(e)})),n})})},t.prototype.closeQuickview=function(){this.queryStateModel.set(p.QueryStateModel.attributesEnum.quickview,"")},t.ID="Quickview",t.doExport=function(){f.exportGlobally({Quickview:t,QuickviewDocument:d.QuickviewDocument})},t.options={alwaysShow:r.ComponentOptions.buildBooleanOption({defaultValue:!1}),title:r.ComponentOptions.buildStringOption(),showDate:r.ComponentOptions.buildBooleanOption({defaultValue:!0}),enableLoadingAnimation:r.ComponentOptions.buildBooleanOption({defaultValue:!0}),contentTemplate:k.TemplateComponentOptions.buildTemplateOption({selectorAttr:"data-template-selector",idAttr:"data-template-id"}),loadingAnimation:r.ComponentOptions.buildOption(r.ComponentOptionsType.NONE,function(e){var t=e.getAttribute("data-loading-animation-selector");if(null!=t){var o=s.$$(document.documentElement).find(t);if(null!=o)return s.$$(o).detach(),o}var n=e.getAttribute("data-loading-animation-template-id");if(null!=n){var i=k.TemplateComponentOptions.loadResultTemplateFromId(n);if(i)return i.instantiateToElement(void 0,{checkCondition:!1})}return a.DomUtils.getBasicLoadingAnimation()})},t.resultCurrentlyBeingRendered=null,t}(i.Component);t.Quickview=$,h.Initialization.registerAutoCreateComponent($)},402:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(22),r=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-quick-view-full-height"><div class="CoveoQuickviewDocument"></div></div>'},t}(i.Template);t.DefaultQuickviewTemplate=r},403:function(e,t,o){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=o(6),r=o(7),a=o(5),s=o(2),l=o(151),u=o(21),c=o(4),d=o(102),p=o(1),m=o(8),h=o(0),v=function(e){function t(o,n,i,s){var l=e.call(this,o,t.ID,i)||this;return l.element=o,l.options=n,l.result=s,l.options=r.ComponentOptions.initComponentOptions(o,t,n),l.result=s||l.resolveResult(),l.termsToHighlightWereModified=!1,a.Assert.exists(l.result),l}return n(t,e),t.prototype.createDom=function(){var e=s.$$("div");e.addClass("coveo-quickview-document"),this.element.appendChild(e.el),this.header=this.buildHeader(),this.iframe=this.buildIFrame(),e.append(this.header.el),e.append(this.iframe.el)},t.prototype.open=function(){var e=this;this.ensureDom();var t=(new Date).getTime(),o=this.iframe.find("iframe");o.src="about:blank";var n=this.queryController.getEndpoint(),i=h.keys(this.result.termsToHighlight),r={termsToHighlight:i};s.$$(this.element).trigger(l.QuickviewEvents.openQuickview,r),this.checkIfTermsToHighlightWereModified(r.termsToHighlight);var a=h.extend({},this.getBindings().queryController.getLastQuery());this.termsToHighlightWereModified&&this.handleTermsToHighlight(r.termsToHighlight,a);var u={queryObject:a,requestedOutputSize:this.options.maximumDocumentSize};n.getDocumentHtml(this.result.uniqueId,u).then(function(n){null!=o.contentDocument&&(e.renderHTMLDocument(o,n),e.triggerQuickviewLoaded(t))}).catch(function(i){null!=o.contentDocument&&(0!=i.status?(e.renderErrorReport(o,i.status),e.triggerQuickviewLoaded(t)):(o.onload=function(){e.triggerQuickviewLoaded(t)},o.src=n.getViewAsHtmlUri(e.result.uniqueId,u)))})},t.prototype.renderHTMLDocument=function(e,t){var o=this;e.onload=function(){if(o.computeHighlights(e.contentWindow),o.isNewQuickviewDocument(e.contentWindow)){var t=s.$$(o.element).find("iframe");if(t){t.style.padding="0";var n=s.$$(o.element).find(".coveo-quickview-header");n.style.paddingTop="10",n.style.paddingLeft="10"}}""==s.$$(o.element).find(".coveo-quickview-header").innerHTML&&(s.$$(o.element).find(".coveo-quickview-header").style.display="none")},this.writeToIFrame(e,t),this.wrapPreElementsInIframe(e)},t.prototype.renderErrorReport=function(e,t){var o="";o=400==t?"NoQuickview":"OopsError";var n="<html><body style='font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none;' >"+m.l(o)+" </body></html>";this.writeToIFrame(e,n)},t.prototype.writeToIFrame=function(e,t){var o=t;t instanceof HTMLDocument&&(h.each(s.$$(t.body).findAll("a"),function(e){e.setAttribute("target","_top")}),o=t.getElementsByTagName("html")[0].outerHTML),e.contentWindow.document.open();try{e.contentWindow.document.write(o)}catch(e){}e.contentWindow.document.close()},t.prototype.wrapPreElementsInIframe=function(e){try{var t=document.createElement("style");t.type="text/css";var o="html pre { white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word; }";o+="body, html { font-family: Arimo, 'Helvetica Neue', Helvetica, Arial, sans-serif; -webkit-text-size-adjust: none; }",u.DeviceUtils.isIos()&&(o+="body, html { height: 1px !important; min-height: 100%; width: 1px !important; min-width: 100%; overflow: scroll; }",s.$$(e).setAttribute("scrolling","no"),o+="body, html {margin: auto}",e.parentElement.style.margin="0 0 5px 5px"),"styleSheet"in t?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o));e.contentWindow.document.head.appendChild(t)}catch(e){}},t.prototype.triggerQuickviewLoaded=function(e){var t=(new Date).getTime(),o={duration:t-e};s.$$(this.element).trigger(l.QuickviewEvents.quickviewLoaded,o)},t.prototype.computeHighlights=function(e){var t=this;s.$$(this.header).empty(),this.keywordsState=[];var o={},n=0;h.each(s.$$(e.document.body).findAll('[id^="CoveoHighlight"]'),function(e,i){var r=t.getHighlightIdParts(e);if(r){var a=r[1],s=parseInt(r[2],10),l=parseInt(r[3],10),u=o[a];if(null==u&&1==l?o[a]=u={text:t.getHighlightInnerText(e),count:1,index:parseInt(a,10),termsCount:"coveotaggedword"==e.nodeName.toLowerCase()?0:1,element:e,occurence:s}:u&&(u.occurence==s&&("coveotaggedword"==e.nodeName.toLowerCase()?u.text+=t.getHighlightInnerText(e):u.termsCount<l&&(u.text+=t.getHighlightInnerText(e),u.termsCount+=1)),u.count=Math.max(u.count,s),n+=1),u&&u.occurence==s&&"span"==e.nodeName.toLowerCase()){var c=t.getHightlightEmbeddedWordIdParts(e),d=c?o[c[1]]:null;d&&d.occurence==parseInt(c[2],10)&&(d.text+=e.childNodes[0].nodeValue||"")}}}),0==n&&(this.header.el.style.minHeight="0");var i=[];return h.each(o,function(o){o.text=t.resolveOriginalTermFromHighlight(o.text);var n={word:o,color:o.element.style.backgroundColor,currentIndex:0,index:o.index};t.keywordsState.push(n),s.$$(t.header).append(t.buildWordButton(n,e)),i.push(o.text)}),i},t.prototype.getHighlightIdParts=function(e){var t=e.id.substr("CoveoHighlight".length+1).match(/^([0-9]+)\.([0-9]+)\.([0-9]+)$/);return t&&t.length>3?t:null},t.prototype.getHighlightInnerText=function(e){return"coveotaggedword"==e.nodeName.toLowerCase()?e.childNodes.length>=1?e.childNodes.item(0).textContent||"":"":e.textContent||""},t.prototype.getHightlightEmbeddedWordIdParts=function(e){var t=e.getElementsByTagName("coveotaggedword")[0];return t?this.getHighlightIdParts(t):null},t.prototype.resolveOriginalTermFromHighlight=function(e){var t=this,o=e;return this.result.termsToHighlight&&(o=h.find(h.keys(this.result.termsToHighlight),function(o){return o.toLowerCase()==e.toLowerCase()||void 0!=h.find(t.result.termsToHighlight[o],function(t){return t.toLowerCase()==e.toLowerCase()})})||o),o},t.prototype.buildWordButton=function(e,t){var o=this,n=s.$$("span");n.addClass("coveo-term-for-quickview");var i=s.$$("span");i.addClass("coveo-term-for-quickview-name"),i.setHtml(e.word.text),i.on("click",function(){o.navigate(e,!1,t)}),n.append(i.el);var r=s.$$("span");r.addClass("coveo-term-for-quickview-up-arrow");var a=s.$$("span");a.addClass("coveo-term-for-quickview-up-arrow-icon"),r.append(a.el),r.on("click",function(){o.navigate(e,!0,t)}),n.append(r.el);var l=s.$$("span");l.addClass("coveo-term-for-quickview-down-arrow");var u=s.$$("span");return u.addClass("coveo-term-for-quickview-down-arrow-icon"),l.append(u.el),l.on("click",function(){o.navigate(e,!1,t)}),n.append(l.el),n.el.style.backgroundColor=e.color,n.el.style.borderColor=this.getSaturatedColor(e.color),l.el.style.borderColor=this.getSaturatedColor(e.color),n.el},t.prototype.navigate=function(e,t,o){var n,i=e.currentIndex;n=t?i<=1?e.word.count:i-1:i==e.word.count?1:i+1;var r=this.getScrollingElement(o),a=s.$$(r).find('[id^="CoveoHighlight:'+e.word.index+"."+i+'"]');a&&(a.style.border="");var l=s.$$(o.document.body).find('[id^="CoveoHighlight:'+e.word.index+"."+n+'"]');if(l.style.border="1px dotted #333",e.currentIndex=n,this.isNewQuickviewDocument(o)){var u=s.$$(l).closest(".pc");s.$$(u).addClass("opened")}l.scrollIntoView(),document.body.scrollLeft=0,document.body.scrollTop=0},t.prototype.buildHeader=function(){var e=s.$$("div");return e.addClass("coveo-quickview-header"),e},t.prototype.buildIFrame=function(){var e=s.$$("iframe");e.setAttribute("sandbox","allow-same-origin allow-top-navigation");var t=s.$$("div");return t.addClass("coveo-iframeWrapper"),t.el.appendChild(e.el),t},t.prototype.getScrollingElement=function(e){var t;return this.isNewQuickviewDocument(e)&&(t=s.$$(e.document.body).find("#page-container")),t||(t=s.$$(e.document.body).el),t},t.prototype.isNewQuickviewDocument=function(e){var t=s.$$(e.document.head).find("meta[name='generator']");return t&&"pdf2htmlEX"==t.getAttribute("content")},t.prototype.handleTermsToHighlight=function(e,t){var o=this;for(var n in this.result.termsToHighlight)delete this.result.termsToHighlight[n];var i="";h.each(e,function(e){i+=e+" ",o.result.termsToHighlight[e]=new Array(e)}),i=i.substring(0,i.length-1),t.q=i},t.prototype.checkIfTermsToHighlightWereModified=function(e){c.Utils.arrayEqual(e,h.keys(this.result.termsToHighlight))||(this.termsToHighlightWereModified=!0)},t.prototype.getSaturatedColor=function(e){var t=parseInt(e.substring(4,7)),o=parseInt(e.substring(9,12)),n=parseInt(e.substring(14,17)),i=d.ColorUtils.rgbToHsv(t,o,n);i[1]*=2,i[1]>1&&(i[1]=1);var r=d.ColorUtils.hsvToRgb(i[0],i[1],i[2]);return"rgb("+r[0].toString()+", "+r[1].toString()+", "+r[2].toString()+")"},t.ID="QuickviewDocument",t.options={maximumDocumentSize:r.ComponentOptions.buildNumberOption({defaultValue:0,min:0})},t}(i.Component);t.QuickviewDocument=v,p.Initialization.registerAutoCreateComponent(v)},404:function(e,t){}});